spring.application.name=Analytics
spring.profiles.active=${SPRING_PROFILES_ACTIVE:local}

# Base de datos H2 deshabilitada. Usar la configuración MySQL.
# spring.datasource.url=${SPRING_DATASOURCE_URL:jdbc:h2:mem:analytics;DB_CLOSE_DELAY=-1;MODE=MySQL}
# spring.datasource.driver-class-name=${SPRING_DATASOURCE_DRIVER_CLASS_NAME:org.h2.Driver}
# spring.datasource.username=${SPRING_DATASOURCE_USERNAME:sa}
# spring.datasource.password=${SPRING_DATASOURCE_PASSWORD:}

spring.jpa.hibernate.ddl-auto=${SPRING_JPA_HIBERNATE_DDL_AUTO:update}
spring.jpa.show-sql=${SPRING_JPA_SHOW_SQL:false}
spring.jpa.properties.hibernate.format_sql=${SPRING_JPA_PROPERTIES_HIBERNATE_FORMAT_SQL:false}

spring.datasource.url=jdbc:mysql://${DB_URL}/${DB_SCHEMA}
spring.datasource.username=${DB_USR}
spring.datasource.password=${DB_PASSWORD}

spring.kafka.bootstrap-servers=${KAFKA_BOOTSTRAP:localhost:9092}
spring.kafka.consumer.group-id=${KAFKA_CONSUMER_GROUP_ID:analitica-ms}
spring.kafka.consumer.auto-offset-reset=${KAFKA_CONSUMER_AUTO_OFFSET_RESET:earliest}
spring.kafka.consumer.enable-auto-commit=${KAFKA_CONSUMER_ENABLE_AUTO_COMMIT:true}

analitica.kafka.inventario.topic=${INVENTARIO_TOPIC:inventario}
analitica.kafka.inventario.concurrency=${INVENTARIO_CONCURRENCY:1}
analitica.kafka.ventas.topic=${VENTAS_TOPIC:ventas}
analitica.kafka.ventas.concurrency=${VENTAS_CONCURRENCY:1}
analitica.kafka.dlq.enabled=${DLQ_ENABLED:false}
analitica.kafka.dlq.topicSuffix=${DLQ_SUFFIX:.dlq}
analitica.ack.enabled=${ANALYTICS_ACK_ENABLED:true}
analitica.ack.url=${ACK_URL:http://localhost:8080/events/ack}

analytics.kafka.enabled=${ANALYTICS_KAFKA_ENABLED:true}
analytics.ack.enabled=${ANALYTICS_ACK_ENABLED:true}
analytics.ack.auth.enabled=${ANALYTICS_ACK_AUTH_ENABLED:true}
analytics.ack.retry.cron=${ANALYTICS_ACK_RETRY_CRON:0 */1 * * * *}

communication.intermediary.url=${CORE_API_URL:http://localhost:8090}

keycloak.token.url=${KEYCLOAK_TOKEN_URL:http://localhost:8080/realms/ecommerce/protocol/openid-connect/token}
keycloak.client-id=${KEYCLOAK_CLIENT_ID:analytics-app}
keycloak.client-secret=${KEYCLOAK_CLIENT_SECRET:O4Nki7ZVyaiW9EGgf2y8h6ThQJmoMles}

http.client.connect-timeout-ms=${HTTP_CONNECT_TIMEOUT_MS:5000}
http.client.read-timeout-ms=${HTTP_READ_TIMEOUT_MS:10000}

management.endpoints.web.exposure.include=${MANAGEMENT_ENDPOINTS_WEB_EXPOSURE_INCLUDE:health,info,metrics,prometheus}

server.port=${SERVER_PORT:8085}
server.servlet.context-path=/api
server.forward-headers-strategy=framework

logging.level.org.springframework.kafka=${LOG_LEVEL_SPRING_KAFKA:WARN}
logging.level.ar.edu.uade.analytics.kafka=${LOG_LEVEL_ANALYTICS_KAFKA:WARN}
logging.level.ar.edu.uade.analytics.messaging=${LOG_LEVEL_ANALYTICS_MESSAGING:WARN}
logging.level.org.hibernate.SQL=${LOG_LEVEL_HIBERNATE_SQL:WARN}
logging.level.org.hibernate.orm.jdbc.bind=${LOG_LEVEL_HIBERNATE_BIND:WARN}